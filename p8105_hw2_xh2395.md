p8105\_hw2\_xh2395
================
Xin He
9/27/2019

## Problem 1

**Read and clean the Mr. Trash Wheel sheet:**

``` r
Mr_Trash_data = 
  read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "Mr. Trash Wheel", range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
```

**Read and clean precipitation data for 2018**

``` r
preci2018_data = 
  read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2018 Precipitation", range = "A2:B14") %>% 
  janitor::clean_names() %>%
  drop_na(total) %>% 
  mutate(year = 2018)
```

**Read and clean precipitation data for 2017**

``` r
preci2017_data = 
  read_excel(path = "./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2017 Precipitation", range = "A2:B14") %>% 
  janitor::clean_names() %>%
  drop_na(total) %>% 
  mutate(year = 2017)
```

**Combine precipitation datasets**

``` r
com_data = full_join(preci2017_data, preci2018_data, by = NULL) %>% 
  mutate(month = month.name[month])
```

    ## Joining, by = c("month", "total", "year")

In dataset “Mr\_Trash\_data”, the number of observations is 285, and the
number of variables is 14. Key variables include “dumpster” and
“sports\_balls”.

In dataset “preci2018\_data”, the number of observations is 7, and the
number of variables is 3. Key variables include “year”, “month” and
“total”.

In dataset “preci2017\_data”, the number of observations is 12, and the
number of variables is 3. Key variables include “year”, “month” and
“total”.

In dataset “com\_data”, the number of observations is 19, and the number
of variables is 3. Key variables include “year”, “month” and “total”.

The total precipitation in 2018 is 23.5 inches.

The median number of sports balls in a dumpster in 2017 is 8.

## Problem 2

**Clean the data in pols-month.csv**

``` r
pols_data = 
  read_csv("./data/pols-month.csv") %>% 
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>% 
  mutate(year = as.integer(year), month = as.integer(month), day = as.integer(day)) %>% 
  mutate(month = month.name[month]) %>% 
  mutate(president = ifelse(prez_gop %in% 0, "dem",
     ifelse(prez_gop %in% 1, "gop", "gop"))) %>% 
  select(-prez_gop, -prez_dem, -day)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

**Clean the data in snp.csv**

``` r
snp_data = 
  read_csv("./data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year"), sep = "/") %>% 
  mutate(year = as.integer(year), month = as.integer(month), day = as.integer(day)) %>% 
  mutate(month = month.name[month]) %>% 
  select(-day) %>% 
  arrange(year, month) %>% 
  select("year", everything())
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

**Tidy the unemployment data**

``` r
unemploy_data = 
  read_csv("./data/unemployment.csv") %>% 
  rename(January = Jan, February = Feb, March = Mar, April =  Apr, June = Jun, July = Jul,     Auguest = Aug, September = Sep, October = Oct, November = Nov, December = Dec)
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
unemploy_tidy_data = 
  pivot_longer(
    unemploy_data, 
    January:December,
    names_to = "month", 
    values_to = "unemployment") %>% 
  janitor::clean_names()
```

**Join the datasets by merging snp into pols**

``` r
pols_snp_data = 
  left_join(pols_data, snp_data, by = c("year", "month"))
```

**Merging unemployment**

``` r
p_s_unemploy_data = 
  left_join(pols_snp_data, unemploy_tidy_data, by = c("year", "month"))
```

In dataset “pols\_data”, the number of observations is 822, and the
number of variables is 9. Key variables include “year”, “month” and
“president”. Range of years in this data is 1947-2015.

In dataset “snp\_data”, the number of observations is 787, and the
number of variables is 3. Key variables include “year”, “month” and
“close”. Range of years in this data is 1950-2015.

In dataset “unemploy\_tidy\_data”, the number of observations is 816,
and the number of variables is 3. Key variables include “year”, “month”
and “unemployment”. Range of years in this data is 1948-2015.

In dataset “pols\_snp\_data”, the number of observations is 822, and the
number of variables is 10. Key variables include “year”, “month”,
“president” and “close”. Range of years in this data is 1947-2015.

The resulting dataset “p\_s\_unemploy\_data”, merged previous three
datasets “pols\_data”, “snp\_data” and “unemploy\_tidy\_data” together
by year and month. In the resulting dataset, the number of observations
is 822, and the number of variables is 11. Key variables include “year”,
“month”, “president”,“close” and “unemployment”. Range of years in this
data is 1947-2015.
